<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title> · sbt Reference Manual</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='website'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../js/page.js"></script>
<script type="text/javascript" src="../../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../../css/page.css"/>

<!--
<link rel="shortcut icon" href="../../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../../index.html" >
<span class="home-icon">⌂</span>sbt Reference Manual
</a>
<div class="version-number">
1.0.2
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../../getting-started/index.html" class="page">Getting Started with sbt</a>
  <ul>
    <li><a href="../../getting-started/setup.html" class="page">Installing sbt</a></li>
    <li><a href="../../getting-started/hello-world.html" class="page">Hello, World</a></li>
    <li><a href="../../getting-started/running.html" class="page">Running sbt</a></li>
  </ul></li>
  <li><a href="../../plugin-developers/index.html" class="page">sbt for Plugin Developers</a>
  <ul>
    <li><a href="../../plugin-developers/anatomy.html" class="page">Anatomy of an sbt Plugin</a></li>
    <li><a href="../../plugin-developers/testing.html" class="page">Testing sbt Plugins</a></li>
    <li><a href="../../plugin-developers/best-practices.html" class="page">Best Practices</a></li>
    <li><a href="../../plugin-developers/cross-building.html" class="page">Cross-building Plugins</a></li>
  </ul></li>
  <li><a href="../../developing-sbt/index.html" class="page">Developing sbt</a>
  <ul>
    <li><a href="../../developing-sbt/modules.html" class="page">Modularization</a></li>
    <li><a href="../../developing-sbt/coding-guidelines.html" class="page">Coding Guidelines</a></li>
    <li><a href="../../developing-sbt/sbt-datatype.html" class="page">sbt-datatype</a></li>
    <li><a href="../../developing-sbt/compiler-interface/index.html" class="page">Compiler Interface</a></li>
    <li><a href="../../developing-sbt/launcher/index.html" class="page">sbt Launcher</a></li>
    <li><a href="../../developing-sbt/developer-notes/index.html" class="page">Developer Notes</a></li>
  </ul></li>
  <li><a href="../../faq.html" class="page">FAQ</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../../index.html">sbt Reference Manual</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../../index.html" >
<span class="home-icon">⌂</span>sbt Reference Manual
</a>
<div class="version-number">
1.0.2
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../../getting-started/index.html" class="page">Getting Started with sbt</a>
  <ul>
    <li><a href="../../getting-started/setup.html" class="page">Installing sbt</a></li>
    <li><a href="../../getting-started/hello-world.html" class="page">Hello, World</a></li>
    <li><a href="../../getting-started/running.html" class="page">Running sbt</a></li>
  </ul></li>
  <li><a href="../../plugin-developers/index.html" class="page">sbt for Plugin Developers</a>
  <ul>
    <li><a href="../../plugin-developers/anatomy.html" class="page">Anatomy of an sbt Plugin</a></li>
    <li><a href="../../plugin-developers/testing.html" class="page">Testing sbt Plugins</a></li>
    <li><a href="../../plugin-developers/best-practices.html" class="page">Best Practices</a></li>
    <li><a href="../../plugin-developers/cross-building.html" class="page">Cross-building Plugins</a></li>
  </ul></li>
  <li><a href="../../developing-sbt/index.html" class="page">Developing sbt</a>
  <ul>
    <li><a href="../../developing-sbt/modules.html" class="page">Modularization</a></li>
    <li><a href="../../developing-sbt/coding-guidelines.html" class="page">Coding Guidelines</a></li>
    <li><a href="../../developing-sbt/sbt-datatype.html" class="page">sbt-datatype</a></li>
    <li><a href="../../developing-sbt/compiler-interface/index.html" class="page">Compiler Interface</a></li>
    <li><a href="../../developing-sbt/launcher/index.html" class="page">sbt Launcher</a></li>
    <li><a href="../../developing-sbt/developer-notes/index.html" class="page">Developer Notes</a></li>
  </ul></li>
  <li><a href="../../faq.html" class="page">FAQ</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../../index.html">sbt Reference Manual</a></li>
  <li><a href="../../developing-sbt/index.html">Developing sbt</a></li>
  <li><a href="../../developing-sbt/developer-notes/index.html">Developer Notes</a></li>
  <li>Command Line Applications</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h2><a href="#creating-command-line-applications-using-sbt" name="creating-command-line-applications-using-sbt" class="anchor"><span class="anchor-link"></span></a>Creating Command Line Applications Using sbt</h2>
<p>There are several components of sbt that may be used to create a command line application. The <a href="../launcher/index.html">launcher</a> and the <a href="Commands.html">command system</a> are the two main ones illustrated here.</p>
<p>As described on the <a href="../launcher/index.html">launcher page</a>, a launched application implements the <code>xsbti.AppMain</code> interface and defines a brief configuration file that users pass to the launcher to run the application. To use the command system, an application sets up a <a href="Build-State.html">State</a> instance that provides <a href="Commands.html">command implementations</a> and the initial commands to run. A minimal hello world example is given below.</p>
<h3><a href="#hello-world-example" name="hello-world-example" class="anchor"><span class="anchor-link"></span></a>Hello World Example</h3>
<p>There are three files in this example:</p>
<ul>
  <li><code>build.sbt</code></li>
  <li><code>Main.scala</code></li>
  <li><code>hello.build.properties</code></li>
</ul>
<p>To try out this example:</p>
<ol>
  <li>Put the first two files in a new directory</li>
  <li>In sbt&rsquo;s shell run <code>publishLocal</code> in that directory</li>
  <li>Run <code>sbt @path/to/hello.build.properties</code> to run the application.</li>
</ol>
<p>Like for sbt itself, you can specify commands from the command line (batch mode) or run them at an prompt (interactive  mode).</p>
<h4><a href="#build-definition-build-sbt" name="build-definition-build-sbt" class="anchor"><span class="anchor-link"></span></a>Build Definition: <code>build.sbt</code></h4>
<p>The <code>build.sbt</code> file should define the standard settings: <code>name</code>, <code>version</code>, and <code>organization</code>. To use the sbt command system, a dependency on the <code>command</code> module is needed. To use the task system, add a dependency on the <code>task-system</code> module as well.</p>
<pre class="prettyprint"><code class="language-scala">organization := &quot;org.example&quot;
name := &quot;hello&quot;
version := &quot;0.1-SNAPSHOT&quot;
libraryDependencies += &quot;org.scala-sbt&quot; % &quot;command&quot; % &quot;0.12.0&quot;
</code></pre>
<h4><a href="#application-main-scala" name="application-main-scala" class="anchor"><span class="anchor-link"></span></a>Application: <code>Main.scala</code></h4>
<p>The application itself is defined by implementing <a href="../api/xsbti/AppMain.html">xsbti.AppMain</a>. The basic steps are:</p>
<ol>
  <li>Provide command definitions. These are the commands that are available for users to run.</li>
  <li>Define initial commands. These are the commands that are initially scheduled to run. For example, an application will  typically add anything specified on the command line (what sbt calls batch mode) and if no commands are defined, enter  interactive mode by running the &lsquo;shell&rsquo; command.</li>
  <li>Set up logging. The default setup in the example rotates the log file after each user interaction and sends brief  logging to the console and verbose logging to the log file.</li>
</ol>
<pre class="prettyprint"><code class="language-scala">package org.example

import sbt._
import java.io.{File, PrintWriter}

final class Main extends xsbti.AppMain {
  /** Defines the entry point for the application.
   * The call to `initialState` sets up the application.
   * The call to runLogged starts command processing.
   */
  def run(configuration: xsbti.AppConfiguration): xsbti.MainResult =
    MainLoop.runLogged( initialState(configuration) )

  /** Sets up the application by constructing an initial State instance with the
   * supported commands and initial commands to run.  See the State API documentation
   * for details.
   */
  def initialState(configuration: xsbti.AppConfiguration): State = {
    val commandDefinitions = hello +: BasicCommands.allBasicCommands
    val commandsToRun = Hello +: &quot;iflast shell&quot; +: configuration.arguments.map(_.trim)
    State(
      configuration,
      commandDefinitions,
      Set.empty,
      None,
      commandsToRun,
      State.newHistory,
      AttributeMap.empty,
      initialGlobalLogging,
      State.Continue
    )
  }

  // defines an example command.  see the Commands page for details.
  val Hello = &quot;hello&quot;
  val hello = Command.command(Hello) { s =&gt;
    s.log.info(&quot;Hello!&quot;)
    s
  }

  /** Configures logging to log to a temporary backing file as well as to the console.
   * An application would need to do more here to customize the logging level and
   * provide access to the backing file (like sbt&#39;s last command and logLevel setting).
   */
  def initialGlobalLogging: GlobalLogging =
    GlobalLogging.initial(MainLogging.globalDefault _, File.createTempFile(&quot;hello&quot;, &quot;log&quot;))
}
</code></pre>
<h4><a href="#launcher-configuration-file-hello-build-properties" name="launcher-configuration-file-hello-build-properties" class="anchor"><span class="anchor-link"></span></a>Launcher configuration file: <code>hello.build.properties</code></h4>
<p>The launcher needs a configuration file in order to retrieve and run an application. <code>hello.build.properties</code>:</p>
<pre><code>[scala]
  version: 2.9.1

[app]
  org: org.example
  name: hello
  version: 0.1-SNAPSHOT
  class: org.example.Main
  components: xsbti
  cross-versioned: true

[repositories]
  local
  maven-central
  typesafe-ivy-releases: http://repo.typesafe.com/typesafe/ivy-releases/, [organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext]
</code></pre>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/sbt/website/tree/master/src/paradox/developing-sbt/developer-notes/command-line-applications.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="../../developing-sbt/developer-notes/nightly-builds.html">Nightly Builds</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../../developing-sbt/developer-notes/command-line-applications.html#creating-command-line-applications-using-sbt" class="header">Creating Command Line Applications Using sbt</a>
  <ul>
    <li><a href="../../developing-sbt/developer-notes/command-line-applications.html#hello-world-example" class="header">Hello World Example</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../js/magellan.js"></script>

<style type="text/css">@import "../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
